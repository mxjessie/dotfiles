# base16 monokai color template
# from https://gist.github.com/akrasic/94021a79acd70898a26b

set $base00 #272822
set $base01 #383830
set $base02 #49483e
set $base03 #75715e
set $base04 #a59f85
set $base05 #f8f8f2
set $base06 #f5f4f1
set $base07 #f9f8f5
set $base08 #f92672
set $base09 #fd971f
set $base0A #f4bf75
set $base0B #a6e22e
set $base0C #a1efe4
set $base0D #66d9ef
set $base0E #ae81ff
set $base0F #cc6633

set $exec exec --no-startup-id

# win key
set $mod Mod4
set $alt Mod1
set $font pango:Inconsolata Medium 10
font $font

floating_modifier $mod
new_window pixel 2
new_float pixel 2
hide_edge_borders smart

# for gaps
for_window [class="^.*"] border pixel 2
smart_gaps on
smart_borders on
#themeing                   border  backgr. text    indicator
client.focused              $base0E $base0E $base00 $base01
client.focused_inactive     $base02 $base02 $base03 $base01
client.unfocused            $base01 $base01 $base03 $base01
client.urgent               $base02 $base08 $base07 $base08

### app launcher shortcuts
# terminals
bindsym $mod+Shift+Return $exec i3-sensible-terminal
bindsym $mod+Return $exec $HOME/.cargo/bin/alacritty

# search shortcuts
#bindsym $mod+g $exec i3-input -f $font -F 'exec --no-startup-id sensible-browser "https://google.com/search?q=%s"' -P 'üîç '
#bindsym $mod+Shift+g $exec i3-input -f $font -F 'exec --no-startup-id sensible-browser "%s"' -P 'üåê '

# screenshot tools!
bindsym --release $mod+Print $exec 'scrot -m "$HOME/Pictures/Screenshots/%s_%H%M_%d.%m.%Y_$wx$h.png"'
bindsym --release $mod+Shift+Print $exec 'scrot -s -m "$HOME/Pictures/Screenshots/%s_%H%M_%Y-%m-%d"'

# lock the screen
bindsym $mod+Shift+l $exec $HOME/bin/xlock
bindsym XF86ScreenSaver $exec $HOME/bin/xlock

# brightness
bindsym XF86MonBrightnessUp $exec xbacklight -inc 5
bindsym XF86MonBrightnessDown $exec xbacklight -dec 5
#bindsym XF86KbdBrightnessUp
#bindsym XF86KbdBrightnessDown

# touchpad toggle
bindsym XF86TouchpadToggle $exec $HOME/bin/tp-toggle

### window settings
for_window [window_type="splash"] floating enable

for_window [class="Claws-mail" window_role="compose"] floating enable, border normal
for_window [class="feh"] floating enable
for_window [instance="keepassx"] floating enable
for_window [class="MPlayer"] floating enable
for_window [class="mpv"] floating enable
for_window [class="obs"] floating enable
for_window [instance="speedcrunch"] floating enable, border normal
for_window [class="Thunderbird" instance="Msgcompose"] floating enable, border normal
for_window [class="Tickr"] sticky enable, floating enable, border pixel 0

#rename workspace 8 to 8: social
assign [class="TelegramDesktop"] 8
assign [class="discord"] 8
assign [class="Slack"] 8
assign [class="Signal"] 8

#rename workspace 9 to 9: email
assign [class="Claws-mail"] 9
assign [class="Thunderbird"] 9

### startup stuff
exec --no-startup-id $HOME/bin/xwallpaper
exec --no-startup-id $HOME/.hidpi
exec --no-startup-id vmware-user-suid-wrapper
exec --no-startup-id lxpolkit
exec --no-startup-id ibus-daemon -dr
exec --no-startup-id nm-applet
exec --no-startup-id blueman-applet
exec --no-startup-id compton -f --inactive-dim 0.2 -D 8
exec --no-startup-id redshift-gtk
#exec --no-startup-id xscreensaver -no-splash
exec --no-startup-id xautolock -time 5 -corners 00+- -cornerdelay 2 -cornerredelay 2 -locker $HOME/bin/xlock
exec --no-startup-id claws-mail
exec --no-startup-id discord
exec --no-startup-id telegram
exec --no-startup-id slack
exec --no-startup-id pk-update-icon
### i3 navigation

# start dmenu (a program launcher)
#bindsym $mod+d $exec dmenu_run
# bindsym $mod+d $exec --no-startup-id i3-dmenu-desktop
bindsym $mod+d $exec rofi -show run
bindsym XF86Launch1 $exec speedcrunch

# change focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split horizontal/vertical
bindsym $mod+h split h
bindsym $mod+v split v

# fullscreen
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, FIBONACCI)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
#bindsym $mod+e layout toggle split # original

# kill focused window
#bindsym $mod+Shift+q kill # original

# let's try fibonacci splits
default_orientation vertical
for_window [class=".*"] split toggle
bindsym $mod+Shift+q split toggle kill
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+c focus child

# cycle through workspaces
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

#window switcher
bindsym $alt+Tab $exec rofi -show window

# switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e $exec "i3-nagbar -f $font -t warning -m 'logout?' -b '‚úî' 'i3-msg exit'"

# resize mode
mode "‚Üπ" {
    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+r mode "‚Üπ"

bar {
    font $font
    position bottom
    #status_command i3status
    status_command $HOME/.cargo/bin/i3status-rs $HOME/.config/i3/i3status-rs.toml
    colors {
        separator  $base0B
        background $base01 # was 303030
        statusline $base05
        focused_workspace  $base0D $base03 $base05
        active_workspace   $base0C $base00 $base05
        inactive_workspace $base03 $base00 $base03
        urgent_workspace   $base08 $base03 $base05
    }
}

### i3-gaps stuff ###

gaps inner 12
gaps outer -2

set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
# collides with googling
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
        bindsym o      mode "$mode_gaps_outer"
        bindsym i      mode "$mode_gaps_inner"
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

mode "$mode_gaps_inner" {
        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

mode "$mode_gaps_outer" {
        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

